<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>iAttend Teacher Profile</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Nunito:wght@600;700&display=swap" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<style>
/* -------------------- Global -------------------- */
* { margin:0; padding:0; box-sizing:border-box; }
html, body { 
    height:100%; 
    font-family:'Poppins',sans-serif; 
    background: linear-gradient(180deg,#f7ecd7 0%,#f8f1e5 35%,#fbfaf7 100%); 
    overflow-x:hidden; 
}

/* -------------------- Header -------------------- */
header {
    position:fixed; top:0; left:0; right:0; height:60px; background:#fff; 
    box-shadow:0 6px 20px rgba(0,0,0,0.08); display:flex; align-items:center; padding:0 20px; z-index:1000;
}
#menu-toggle { font-size:28px; margin-right:15px; cursor:pointer; transition: color 0.3s; }
#menu-toggle:hover { color:#4154F1; }

.header-content { display:flex; justify-content:space-between; align-items:center; width:100%; }
.header-content a.title { text-decoration:none; color:#444; font-weight:700; font-size:26px; transition:color 0.3s; }
.header-content a.title:hover { color:#4154F1; }

header a.user-info {
    display:flex; align-items:center; gap:10px; text-decoration:none; color:#444; font-weight:600; 
    transition: all 0.2s ease; padding:0; border-radius:0; background:transparent; box-shadow:none;
}
header a.user-info:hover {
    padding:4px 12px; border-radius:12px; background:#f8f1e5; box-shadow:0 2px 8px rgba(0,0,0,0.08);
}
header a.user-info img { width:36px; height:36px; border-radius:50%; object-fit:cover; }

/* -------------------- Sidebar -------------------- */
.sidebar {
    position:fixed; top:60px; left:0; width:250px; height:calc(100% - 60px); 
    background:#f8f1e5; padding:15px 0; box-shadow:2px 0 15px rgba(0,0,0,0.08); border-top-right-radius:12px; 
    transition: all 0.3s ease; overflow-y:auto; z-index:999;
}
.sidebar-section { margin-bottom:25px; padding:0 15px; }
.sidebar-section-title {
    font-size:11px; text-transform:uppercase; letter-spacing:1px; color:#6b7280; margin-bottom:10px; padding-left:10px;
}
.sidebar-link {
    display:flex; align-items:center; gap:10px; padding:12px 15px; margin-bottom:8px; border-radius:8px; 
    font-size:15px; font-weight:500; color:#2C2C2C; text-decoration:none; transition: all 0.25s ease; white-space:nowrap;
}
.sidebar-link i { width:18px; text-align:center; }
.sidebar-link.active, .sidebar-link:hover { background:#eadbbf; color:#1F2937; font-weight:600; }
.sidebar.collapsed { width:70px; padding:15px 0; overflow:hidden; }
.sidebar.collapsed .sidebar-section-title,
.sidebar.collapsed .sidebar-link span { display:none; }

/* -------------------- Main Content -------------------- */
.main-content {
    margin-left:260px; padding:100px 30px 30px; font-family:'Nunito',sans-serif;
    transition:margin-left 0.3s ease; height:100vh; overflow-y:auto;
}
.sidebar.collapsed ~ .main-content { margin-left:80px; }

/* -------------------- Profile Sections -------------------- */
.profile-sections { display:flex; flex-direction:column; gap:30px; max-width:900px; margin:0 auto; }

/* -------------------- Card -------------------- */
.card {
    background:#fff; padding:30px; border-radius:12px; box-shadow:0 8px 20px rgba(0,0,0,0.08);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover { transform: translateY(-5px); box-shadow:0 15px 30px rgba(0,0,0,0.15); }
.card h2 {
    margin-top:0; margin-bottom:20px; font-family:'Nunito',sans-serif; font-weight:600; font-size:24px; 
    color:#012970; border-bottom:1px solid #eee; padding-bottom:10px;
}

/* -------------------- Profile Content -------------------- */
.profile-content { display:flex; gap:40px; align-items:flex-start; }
.profile-pic-container { position:relative; width:120px; height:120px; flex-shrink:0; transition: transform 0.3s ease; }
.profile-pic-container:hover { transform: scale(1.05); }
.profile-pic-container img { width:100%; height:100%; border-radius:50%; object-fit:cover; border:2px solid #ddd; transition: border 0.3s ease; }
.profile-pic-container:hover img { border:2px solid #4154F1; }
.edit-icon { position:absolute; bottom:0; right:0; background:#4154F1; color:#fff; padding:8px; border-radius:50%; cursor:pointer; font-size:14px; box-shadow:0 2px 5px rgba(0,0,0,0.2); transition:background 0.3s ease; }
.edit-icon:hover { background:#0d29e9; }

.profile-details { flex-grow:1; display:grid; grid-template-columns:repeat(auto-fit, minmax(250px,1fr)); gap:20px; }
.form-group { display:flex; flex-direction:column; }
.form-group label { font-size:14px; color:#555; margin-bottom:5px; font-weight:600; }
.form-group input {
    padding:10px 12px; border:1px solid #ddd; border-radius:5px; background:#fcfcfc; font-size:15px; font-family:'Open Sans',sans-serif; transition:0.3s;
}
.form-group input:focus { border-color:#4154F1; box-shadow:0 0 5px rgba(65,84,241,0.4); outline:none; }
.form-group input:disabled { background:#f5f5f5; color:#777; cursor:not-allowed; }

/* -------------------- Buttons & Actions -------------------- */
.card-actions { display:flex; justify-content:flex-end; gap:10px; margin-top:30px; }
.btn { padding:10px 20px; border-radius:5px; cursor:pointer; border:none; font-weight:600; font-family:'Nunito',sans-serif; transition: all 0.3s ease; }
.btn-primary { background:#4154F1; color:white; }
.btn-primary:hover { background:#0d29e9; transform: translateY(-2px); }
.btn-secondary { background:#6c757d; color:white; }
.btn-secondary:hover { background:#5a6268; transform: translateY(-2px); }

/* -------------------- Status Message -------------------- */
.status-message { margin-top:15px; font-size:14px; font-family:'Open Sans',sans-serif; font-style:italic; color:#333; }

/* -------------------- Modal -------------------- */
.modal { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); display:flex; align-items:center; justify-content:center; z-index:1000; opacity:0; visibility:hidden; transition:0.3s; }
.modal.open { opacity:1; visibility:visible; }
.modal-content { background:#fff; padding:30px; border-radius:12px; box-shadow:0 5px 20px rgba(0,0,0,0.3); width:90%; max-width:500px; position:relative; transform:translateY(-20px); transition: transform 0.3s ease; }
.modal.open .modal-content { transform:translateY(0); }
.modal-close-btn { position:absolute; top:15px; right:15px; font-size:24px; cursor:pointer; color:#aaa; transition: color 0.3s; }
.modal-close-btn:hover { color:#333; }

/* -------------------- Responsive -------------------- */
@media(max-width:992px) {
    .profile-content { flex-direction:column; align-items:center; text-align:center; }
    .profile-details { grid-template-columns:1fr; }
}
</style>

</head>
<body>
<!-- Header -->
<header>
    <span id="menu-toggle">&#9776;</span>
    <div class="header-content">
        <a href="{{ url_for('teacher_dashboard') }}" style="text-decoration: none; color: inherit;">iAttend</a>
        <a href="{{ url_for('teacher_profile') }}" class="user-info">
            <span id="header-user-name">Loading...</span>
            <img id="user-profile-pic-header" src="https://placehold.co/36x36/899BBD/ffffff?text=T" alt="User Profile Picture">
        </a>
    </div>
</header>

<!-- Sidebar -->
<div class="sidebar">
  <div class="sidebar-section">
    <a class="sidebar-link" href="{{ url_for('teacher_dashboard') }}">
      <i class="fas fa-home"></i><span>Dashboard</span>
    </a>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-title">Reports</div>
    <a class="sidebar-link" href="{{ url_for('teacher_attendance') }}">
      <i class="fas fa-chart-bar"></i><span>Attendance Report</span>
    </a>
  </div>

  <div class="sidebar-section">
    <div class="sidebar-section-title">Manage</div>
    <a class="sidebar-link" href="{{ url_for('teacher_schedules') }}">
      <i class="fas fa-calendar"></i><span>Class Schedule</span>
    </a>
    <a class="sidebar-link" href="{{ url_for('teacher_modules') }}">
      <i class="fas fa-book"></i><span>My Modules & Rooms</span>
    </a>
    <a class="sidebar-link" href="{{ url_for('teacher_manage_absent') }}">
      <i class="fas fa-calendar-alt"></i><span>Absences Application</span>
    </a>

  </div>
  {% if profile.is_gc %}
  <div class="sidebar-section">
    <div class="sidebar-section-title">Group Coordinator</div>
    <a class="sidebar-link" href="{{ url_for('gc_manage_group') }}"><i class="fas fa-users-cog"></i><span>Manage Group</span></a>
    <a class="sidebar-link" href="{{ url_for('gc_group_report') }}"><i class="fas fa-file-alt"></i><span>Group Report</span></a>
  </div>
  {% endif %}

  <div class="sidebar-section">
    <a class="sidebar-link" href="{{ url_for('teacher_logout') }}">
      <i class="fas fa-sign-out-alt"></i><span>Logout</span>
    </a>
  </div>
</div>

<!-- Header -->
<header>
  <span id="menu-toggle">&#9776;</span>
  <div class="header-content">
    <a href="{{ url_for('teacher_dashboard') }}" class="title">iAttend</a>
    <a href="{{ url_for('teacher_profile') }}" class="user-info">
      <span>{{ profile.firstName }} {{ profile.lastName }}</span>
      <img src="{{ profile.photo_url or 'https://placehold.co/40x40/b8c6ff/ffffff?text=T' }}" alt="Teacher" />
    </a>
  </div>
</header>

<!-- Main content -->
<div class="main-content" style="font-family:'Nunito',sans-serif;">
    <div class="profile-sections">

        <!-- Profile Card -->
        <div class="card user-profile-card">
            <h2 style="font-family:'Poppins',sans-serif; font-weight:600; color:#212529;">Edit Teacher Profile</h2>
            <div class="profile-content">
                <!-- Profile Picture -->
                <div class="profile-pic-container">
                    <img id="user-profile-pic" 
                         src="{{ profile.photo_url or 'https://placehold.co/120x120/E9E9E9/333333?text=Teacher' }}" 
                         alt="Profile Picture">
                    <input type="file" id="profile-pic-upload" style="display:none;">
                    <i class="fas fa-camera edit-icon" onclick="document.getElementById('profile-pic-upload').click();"></i>
                </div>

                <!-- Profile Form -->
                <form id="profile-form" class="profile-details">
                    <div class="form-group">
                        <label for="first-name-input">First Name</label>
                        <input type="text" id="first-name-input" value="{{ profile.firstName }}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="last-name-input">Last Name</label>
                        <input type="text" id="last-name-input" value="{{ profile.lastName }}" disabled>
                    </div>
                    <div class="form-group">
                        <label for="nickname-input">Nickname</label>
                        <input type="text" id="nickname-input" value="{{ profile.nickname }}">
                    </div>
                    <div class="form-group">
                        <label for="phone-input">Phone Number</label>
                        <input type="text" id="phone-input" value="{{ profile.phone }}">
                    </div>
                    <div class="form-group">
                        <label for="email-input">Email</label>
                        <input type="email" id="email-input" value="{{ profile.email }}" disabled>
                    </div>
                </form>
            </div>

            <!-- Card Actions -->
            <div class="card-actions">
                <button id="cancel-profile-btn" class="btn btn-secondary">Cancel</button>
                <button id="save-profile-btn" class="btn btn-primary">Save Changes</button>
            </div>

            <!-- Status Message -->
            <div id="profile-status-message" class="status-message"></div>
        </div>

        <!-- Password Change Card -->
        <div class="card password-change-card">
            <h2 style="font-family:'Poppins',sans-serif; font-weight:600; color:#212529;">Password Change</h2>
            <p style="font-family:'Nunito',sans-serif; font-size:14px; color:#555; margin-bottom:15px;">
                For security reasons, you can change your password here.
            </p>
            <a href="{{ url_for('teacher_change_password') }}" class="btn btn-primary">Change Password</a>
        </div>

    </div>
</div>




<script>
const menuToggle = document.getElementById('menu-toggle');
const sidebar = document.querySelector('.sidebar');
const mainContent = document.querySelector('.main-content');
menuToggle.addEventListener('click', ()=>{ sidebar.classList.toggle('collapsed'); mainContent.classList.toggle('expanded'); });
</script>

   
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Teacher Attendance - {{ schedule.module_name }} | {{ schedule.group_name }}</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Nunito:wght@600;700&display=swap" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
<style>
body { margin:0; font-family:'Poppins', sans-serif; background:#f5f5f5; }
.sidebar { position:fixed; top:0; left:0; width:260px; height:100%; background:#FFEED3; padding-top:60px; box-shadow:2px 0 15px rgba(0,0,0,0.08); overflow:auto; }
.sidebar-link { display:flex; align-items:center; gap:10px; padding:12px 20px; color:#1A237E; text-decoration:none; font-weight:500; border-radius:8px; margin:5px 10px; }
.sidebar-link:hover, .sidebar-link.active { background:#fff; color:#4154F1; }
header { position:fixed; top:0; left:260px; right:0; height:60px; background:#fff; display:flex; align-items:center; justify-content:space-between; padding:0 20px; box-shadow:0 2px 10px rgba(0,0,0,0.1); z-index:1000; }
header .user-info { display:flex; align-items:center; gap:10px; text-decoration:none; color:#444; }
header .user-info img { width:36px; height:36px; border-radius:50%; object-fit:cover; }
.main { margin-left:260px; padding:100px 30px 30px; }
.card { background:#fff; padding:1rem; border-radius:12px; box-shadow:0 4px 15px rgba(0,0,0,0.08); margin-bottom:1.5rem; }
h2 { margin-bottom:15px; }
table { width:100%; border-collapse:collapse; }
th, td { padding:10px; text-align:left; border-bottom:1px solid #ddd; }
th { background:#4154F1; color:white; border-radius:8px; }
tr:hover { background:#f0f0f0; }
button { padding:8px 16px; border:none; border-radius:8px; background:#4154F1; color:#fff; cursor:pointer; margin-right:10px; }
button:hover { background:#1A237E; }
#live-video { display:block; margin:0 auto 20px; border-radius:12px; box-shadow:0 5px 20px rgba(0,0,0,0.2); }
</style>
</head>
<body>

<div class="sidebar">
  <a class="sidebar-link" href="{{ url_for('teacher_dashboard') }}"><i class="fas fa-home"></i> Dashboard</a>
  <a class="sidebar-link active" href="#"><i class="fas fa-chart-bar"></i> Attendance</a>
  <a class="sidebar-link" href="{{ url_for('teacher_attendance_summary', schedule_id=schedule.docId) }}"><i class="fas fa-file-alt"></i> Summary</a>
</div>

<header>
  <div>iAttend</div>
  <a href="#" class="user-info">
    <span>{{ session.get('user', {}).get('name', 'Teacher') }}</span>
    <img src="{{ session.get('user', {}).get('profile_pic', 'https://placehold.co/40x40/b8c6ff/ffffff?text=T') }}" alt="Teacher">
  </a>
</header>

<div class="main">
  <h2>Attendance - {{ schedule.module_name }} | {{ schedule.group_name }}</h2>

  <!-- Camera Controls -->
  <div class="card">
    <h3>Live Camera Feed</h3>
    <div style="text-align:center; margin-bottom:15px;">
      <a href="{{ url_for('start_camera', schedule_id=schedule.docId) }}"><button>Start Camera</button></a>
      <a href="{{ url_for('stop_camera', schedule_id=schedule.docId) }}"><button>Stop Camera</button></a>
    </div>
    <img id="live-video" src="{{ url_for('video_feed', schedule_id=schedule.docId) }}" width="640" height="480"/>
  </div>

  <!-- Student List -->
  <div class="card">
    <h3>Student List</h3>
    <table>
      <thead>
        <tr>
          <th>Student ID</th>
          <th>Name</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for student in students %}
        <tr>
          <td>{{ student.docId }}</td>
          <td>{{ student.name }}</td>
          <td>{{ student.status }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

</body>
</html>

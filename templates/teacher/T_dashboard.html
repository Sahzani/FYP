<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iAttend Teacher Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  /* Sidebar transition */
  #sidebar { transition: left 0.3s ease; }
  @media (max-width: 768px){
    #sidebar { left: -16rem; position: fixed; top: 0; height: 100%; z-index: 30; }
    #sidebar.show { left: 0; }
  }
</style>
</head>
<body class="bg-gradient-to-br from-[#FFE5B4] to-[#F5EEDC]">

<!-- Page Header -->
<header class="fixed top-0 left-0 right-0 h-16 bg-white shadow flex justify-between items-center px-4 z-40">
    <div class="flex items-center space-x-4">
        <!-- Menu Toggle for Mobile -->
        <button id="menu-toggle" class="text-2xl md:hidden"><i class="fas fa-bars"></i></button>
        <div class="text-2xl font-bold text-gray-800">iAttend Teacher</div>
    </div>
    <div class="flex items-center space-x-4">
        <!-- Profile -->
        <a href="#" class="flex items-center space-x-2">
            <span class="font-semibold text-gray-800">Teacher</span>
            <div class="h-10 w-10 rounded-full overflow-hidden">
                <img src="https://placehold.co/40x40/b8c6ff/ffffff?text=T" alt="Teacher" class="w-full h-full object-cover">
            </div>
        </a>
    </div>
</header>

<!-- Sidebar -->
<div id="sidebar" class="fixed top-16 left-0 w-64 h-[calc(100%-4rem)] bg-[#FFEED3] p-4 shadow overflow-y-auto z-30">
    <div class="mb-6">
        <div class="text-xs font-semibold text-gray-400 uppercase mb-2">Menu</div>
        <a href="T_dashboard.html" class="flex items-center gap-2 p-2 rounded hover:bg-[#ffe1ab] text-[#012970] font-semibold">
            <i class="fas fa-tachometer-alt"></i> Dashboard
        </a>
        <a href="T_class_list.html" class="flex items-center gap-2 p-2 rounded hover:bg-[#ffe1ab] text-[#012970] font-semibold bg-[#e5d7b8]">
            <i class="fas fa-school"></i> View Class List
        </a>
        <a href="T_StartAttendance.html" class="flex items-center gap-2 p-2 rounded hover:bg-[#ffe1ab] text-[#012970] font-semibold">
            <i class="fas fa-clipboard-check"></i> Start Attendance
        </a>
        <a href="T_attendance_report.html" class="flex items-center gap-2 p-2 rounded hover:bg-[#ffe1ab] text-[#012970] font-semibold">
            <i class="fas fa-file-alt"></i> Attendance Report
        </a>
    </div>
    <div>
        <a href="T_login.html" class="flex items-center gap-2 p-2 rounded hover:bg-[#ffe1ab] text-red-600 font-semibold">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>
</div>

    <!-- Logout -->
    <div>
        <a href="{{ url_for('logout') }}" class="flex items-center gap-2 p-2 rounded hover:bg-[#ffe1ab] text-red-600 font-semibold">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>
</div>

<!-- Overlay for mobile when sidebar open -->
<div id="overlay" class="fixed inset-0 bg-black bg-opacity-30 hidden z-20"></div>

<!-- Main Content -->
<main class="pt-20 px-6 md:ml-64 transition-all duration-300">
    <!-- Top Grid: Profile + Stats + Calendar -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
        <!-- Profile Card -->
        <div class="bg-white p-6 rounded-2xl shadow flex items-center space-x-4 lg:col-span-1">
            <div class="h-16 w-16 rounded-full overflow-hidden">
                <img src="https://placehold.co/64x64/b8c6ff/ffffff?text=T" alt="Teacher" class="w-full h-full object-cover">
            </div>
            <div>
                <h3 class="font-bold text-gray-800 text-lg">Teacher Name</h3>
                <p class="text-gray-500 text-sm">ID: T001</p>
                <p class="text-gray-500 text-sm">Email: teacher@example.com</p>
                <p class="text-gray-500 text-sm">Role: Teacher</p>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="lg:col-span-1 grid grid-cols-1 gap-4">
            <div class="bg-white p-6 rounded-2xl shadow text-center">
                <h3 class="font-semibold text-gray-500 mb-2">My Classes</h3>
                <span class="text-3xl font-bold text-blue-600">5</span>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow text-center">
                <h3 class="font-semibold text-gray-500 mb-2">Students Present</h3>
                <span class="text-3xl font-bold text-green-600">120</span>
            </div>
            <div class="bg-white p-6 rounded-2xl shadow text-center">
                <h3 class="font-semibold text-gray-500 mb-2">Students Absent</h3>
                <span class="text-3xl font-bold text-red-600">10</span>
            </div>
        </div>

        <!-- Calendar Card -->
        <div class="bg-white p-6 rounded-2xl shadow lg:col-span-1">
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-lg font-bold text-gray-800">Calendar</h3>
                <span id="calendar-month-year" class="text-sm text-gray-500"></span>
            </div>
            <div class="grid grid-cols-7 text-center text-sm font-semibold text-gray-500 mb-1">
                <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span><span>Sun</span>
            </div>
            <div id="calendar-days" class="grid grid-cols-7 gap-1 text-center text-sm"></div>
        </div>
    </div>

    <!-- Attendance Bar Chart -->
    <div class="bg-white p-6 rounded-2xl shadow mb-6 max-w-4xl mx-auto">
        <canvas id="attendanceBar" width="600" height="350"></canvas>
    </div>
</main>

<script>
  // Mobile Sidebar Toggle
  const menuToggle = document.getElementById('menu-toggle');
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');

  menuToggle.addEventListener('click', () => {
    sidebar.classList.toggle('show');
    overlay.classList.toggle('hidden');
  });

  overlay.addEventListener('click', () => {
    sidebar.classList.remove('show');
    overlay.classList.add('hidden');
  });

  // Calendar JS
  const calendarDaysEl = document.getElementById('calendar-days');
  const calendarMonthYearEl = document.getElementById('calendar-month-year');
  const today = new Date();
  let currentMonth = today.getMonth();
  let currentYear = today.getFullYear();

  function renderCalendar(month, year) {
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month+1, 0);
      const firstDayOfWeek = (firstDay.getDay()+6)%7;
      const daysInMonth = lastDay.getDate();

      calendarMonthYearEl.textContent = `${lastDay.toLocaleString('default',{month:'long'})} ${year}`;
      calendarDaysEl.innerHTML='';

      for(let i=0;i<firstDayOfWeek;i++){calendarDaysEl.appendChild(document.createElement('span'));}

      for(let i=1;i<=daysInMonth;i++){
          const dayEl=document.createElement('span');
          dayEl.textContent=i;
          dayEl.className='p-2 rounded-full w-8 h-8 flex items-center justify-center cursor-pointer transition-colors duration-200';
          if(i===today.getDate() && month===today.getMonth() && year===today.getFullYear()){
              dayEl.classList.add('bg-blue-500','text-white','font-bold');
          } else {
              dayEl.classList.add('text-gray-700','hover:bg-gray-100');
          }
          calendarDaysEl.appendChild(dayEl);
      }
  }
  renderCalendar(currentMonth,currentYear);

  // Chart.js Example
  const ctx=document.getElementById('attendanceBar').getContext('2d');
  new Chart(ctx,{
      type:'bar',
      data:{
          labels:['Present','Late','Absent'],
          datasets:[{
              label:'Number of Students',
              data:[120,8,10],
              backgroundColor:['#4CAF50','#FFC107','#F44336'],
              borderRadius:6
          }]
      },
      options:{
          responsive:true,
          scales:{y:{beginAtZero:true, grid:{color:'#e0e0e0'}}, x:{grid:{display:false}}},
          plugins:{legend:{display:false}}
      }
  });
</script>

</body>
</html>
